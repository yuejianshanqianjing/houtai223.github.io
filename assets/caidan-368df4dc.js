import{C as f,d as E,r as v,o as M,k as i,a as N,c as U,j as e,l as s,B as y,e as d,h as c,t as F,b as V,y as x,F as T,E as r,_ as j}from"./index-059ef627.js";let q=()=>f({url:"/admin/acl/permission",method:"get"}),I=u=>f({url:"/admin/acl/permission/save",method:"post",data:u}),R=u=>f({url:"/admin/acl/permission/update",method:"put",data:u}),S=u=>f({url:`/admin/acl/permission/remove/${u}`,method:"delete"});const G={class:"dialog-footer"},H=E({__name:"caidan",setup(u){const b=v([]);let p=async()=>{const t=await q();t.code==200&&(b.value=t.data)};M(()=>p());let o=v(!1),h=t=>{a.value={code:"",level:0,name:"",pid:0,id:""},o.value=!0,a.value.code="",a.value.name="",a.value.level=t.level+1,a.value.pid=t.id},w=t=>{a.value=t,o.value=!0},A=async t=>{(await S(t.id)).code==200?(r({type:"success",message:"删除成功"}),p()):r({type:"error",message:"系统数据勿动"})},a=v({code:"",level:0,name:"",pid:0,id:""}),$=async()=>{a.value.id?(await R(a.value)).code==200?(r({type:"success",message:"更新成功"}),o.value=!1,p()):r({type:"error",message:"系统数据勿动"}):(await I(a.value)).code==200?(r({type:"success",message:"添加成功"}),o.value=!1,p()):r({type:"error",message:"系统数据勿动"})};return(t,n)=>{const _=i("el-table-column"),m=i("el-button"),z=i("el-table"),g=i("el-input"),k=i("el-form-item"),B=i("el-form"),D=i("el-dialog");return N(),U(T,null,[e(z,{data:b.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:s(()=>[e(_,{prop:"name",label:"名称"}),e(_,{prop:"code",label:"权限值"}),e(_,{prop:"updateTime",label:"修改时间"}),e(_,{label:"操作",align:"center"},{default:s(({row:l,$index:J})=>[e(m,{type:"primary",size:"small",class:y({like:l.level==4}),onClick:C=>d(h)(l)},{default:s(()=>[c(F(l.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["class","onClick"]),e(m,{type:"primary",size:"small",class:y({like:l.level==1}),onClick:C=>d(w)(l)},{default:s(()=>[c("编辑")]),_:2},1032,["class","onClick"]),e(m,{type:"primary",size:"small",class:y({like:l.level==1}),onClick:C=>d(A)(l)},{default:s(()=>[c("删除")]),_:2},1032,["class","onClick"])]),_:1})]),_:1},8,["data"]),e(D,{modelValue:d(o),"onUpdate:modelValue":n[3]||(n[3]=l=>x(o)?o.value=l:o=l),title:"权限管理",width:"30%"},{footer:s(()=>[V("span",G,[e(m,{onClick:n[2]||(n[2]=l=>x(o)?o.value=!1:o=!1)},{default:s(()=>[c("取消")]),_:1}),e(m,{type:"primary",onClick:d($)},{default:s(()=>[c(" 确认 ")]),_:1},8,["onClick"])])]),default:s(()=>[V("span",null,[e(B,null,{default:s(()=>[e(k,{label:"名称","label-width":"80",style:{width:"300px"}},{default:s(()=>[e(g,{modelValue:d(a).name,"onUpdate:modelValue":n[0]||(n[0]=l=>d(a).name=l)},null,8,["modelValue"])]),_:1}),e(k,{label:"权限值","label-width":"80",style:{width:"300px"}},{default:s(()=>[e(g,{modelValue:d(a).code,"onUpdate:modelValue":n[1]||(n[1]=l=>d(a).code=l)},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])],64)}}});const L=j(H,[["__scopeId","data-v-924442fe"]]);export{L as default};
