import{s as K,c as O,o as Q,b as W,e as X}from"./index-195b1a8b.js";import{d as Y,r as u,o as Z,k as i,a as m,c as w,j as e,l as t,e as s,b as d,y as b,h as r,t as h,F as C,g as S,E as x,m as z}from"./index-059ef627.js";const ee=["src"],te={class:"demo-pagination-block"},ae=d("h4",null,"查看商品详情",-1),le=["src"],ie=Y({__name:"sku",setup(ne){let N=u([]),p=u(1),g=u(3),V=u(),c=async()=>{const n=await K(p.value,g.value);n.code==200&&(N.value=n.data.records,V.value=n.data.total)},E=n=>{p.value=1,g.value=n,c()},M=n=>{p.value=n,c()};Z(()=>c());let U=async n=>{if(n.isSale==1){const l=await O(n.id);c(),l.code==200&&x({type:"info",message:"下架成功"})}if(n.isSale==0){const l=await Q(n.id);c(),l.code==200&&x({type:"success",message:"上架成功"})}},F=()=>{x({type:"warning",message:`系统正在升级中,当前进度${Math.floor(Math.random()*100)}%`})},y=u(!1),f=u({skuName:"",skuDesc:"",price:""}),D=u([]),A=u([]),L=u([]),$=async n=>{y.value=!0;const l=await W(n.id);l.code==200&&(f.value.skuName=l.data.skuName,f.value.skuDesc=l.data.skuDesc,f.value.price=l.data.price,D.value=l.data.skuAttrValueList,A.value=l.data.skuSaleAttrValueList,L.value=l.data.skuImageList)},j=async n=>{const l=await X(n.id);l.code==200?(x({type:"success",message:"删除成功"}),c()):(x({type:"error",message:l.data}),c())};return(n,l)=>{const _=i("el-table-column"),v=i("el-button"),P=i("el-table"),T=i("el-pagination"),R=i("el-card"),o=i("el-col"),k=i("el-row"),B=i("el-tag"),q=i("el-carousel-item"),G=i("el-carousel"),H=i("el-drawer");return m(),w(C,null,[e(R,null,{default:t(()=>[e(P,{border:"",data:s(N)},{default:t(()=>[e(_,{type:"index",align:"center",label:"序号",width:"120"}),e(_,{label:"名称",width:"180","show-overflow-tooltip":"true",prop:"skuName"}),e(_,{label:"描述",width:"180","show-overflow-tooltip":"true",prop:"skuDesc"}),e(_,{label:"默认图片",width:"220"},{default:t(({row:a,$index:J})=>[d("img",{src:a.skuDefaultImg,alt:"暂无图片",style:{width:"200px",height:"180px"}},null,8,ee)]),_:1}),e(_,{label:"重量(g)",width:"180",prop:"weight"}),e(_,{label:"价格(元)",width:"180",prop:"price"}),e(_,{label:"操作",width:"250",fixed:"right"},{default:t(({row:a,$index:J})=>[e(v,{size:"small",type:a.isSale==1?"success":"info",icon:a.isSale==1?"Top":"Bottom",onClick:I=>s(U)(a),title:a.isSale==1?"上架中":"下架中"},null,8,["type","icon","onClick","title"]),e(v,{type:"primary",size:"small",icon:"Edit",onClick:s(F)},null,8,["onClick"]),e(v,{size:"small",icon:"InfoFilled",type:"warning",onClick:I=>s($)(a)},null,8,["onClick"]),e(v,{size:"small",icon:"Delete",type:"danger",onClick:I=>s(j)(a)},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),d("div",te,[e(T,{style:{"margin-top":"15px"},"current-page":s(p),"onUpdate:currentPage":l[0]||(l[0]=a=>b(p)?p.value=a:p=a),"page-size":s(g),"onUpdate:pageSize":l[1]||(l[1]=a=>b(g)?g.value=a:g=a),"page-sizes":[3,5,7,10],background:!0,layout:" prev, pager, next, jumper,->, sizes,total",total:s(V),onSizeChange:s(E),onCurrentChange:s(M)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),e(H,{modelValue:s(y),"onUpdate:modelValue":l[2]||(l[2]=a=>b(y)?y.value=a:y=a),direction:"rtl",size:"780px"},{header:t(()=>[ae]),default:t(()=>[d("div",null,[e(k,null,{default:t(()=>[e(o,{span:4,style:{margin:"10px 0"}},{default:t(()=>[r("名称")]),_:1}),e(o,{span:20,style:{margin:"10px 0"}},{default:t(()=>[d("div",null,h(s(f).skuName),1)]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(o,{span:4,style:{margin:"10px 0"}},{default:t(()=>[r("描述")]),_:1}),e(o,{span:20,style:{margin:"10px 0"}},{default:t(()=>[d("div",null,h(s(f).skuDesc),1)]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(o,{span:4,style:{margin:"10px 0"}},{default:t(()=>[r("价格")]),_:1}),e(o,{span:20,style:{margin:"10px 0"}},{default:t(()=>[d("div",null,h(s(f).price),1)]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(o,{span:4,style:{margin:"10px 0"}},{default:t(()=>[r("平台属性")]),_:1}),e(o,{span:20,style:{margin:"10px 0"}},{default:t(()=>[(m(!0),w(C,null,S(s(D),a=>(m(),z(B,{key:a.id,style:{margin:"5px 10px"}},{default:t(()=>[r(h(a.attrName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(o,{span:4,style:{margin:"10px 0"}},{default:t(()=>[r("销售属性")]),_:1}),e(o,{span:20,style:{margin:"10px 0"}},{default:t(()=>[(m(!0),w(C,null,S(s(A),a=>(m(),z(B,{key:a.id,style:{margin:"5px 10px"}},{default:t(()=>[r(h(a.saleAttrName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(o,{span:4,style:{margin:"30px 0"}},{default:t(()=>[r("商品图片")]),_:1}),e(o,{span:16,style:{margin:"30px 0"}},{default:t(()=>[e(G,{"indicator-position":"outside"},{default:t(()=>[(m(!0),w(C,null,S(s(L),a=>(m(),z(q,{key:a.id},{default:t(()=>[d("img",{src:a.imgUrl,alt:"暂无图片",style:{width:"100%",height:"100%"}},null,8,le)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"])],64)}}});export{ie as default};
